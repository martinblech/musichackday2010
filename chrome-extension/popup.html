<head>
<style>
body {
    font-family: "Gill Sans", sans-serif;
    min-width: 500px;
    overflow-x: hidden;
}
.tracklist {
    font-size: 90%;
}
.tagcloud {
    font-size: 80%;
}
a:hover {
    background-color: yellow;
}
.nohover:hover {
    background-color: white;
}
</style>
<script src="jquery-1.4.2.min.js"></script>
<script>
    var text = chrome.extension.getBackgroundPage().selectedText;
    $.post("http://localhost:8080/search", { "q": text },
    function(data) {
        var contents = document.getElementById('tags');
        var i;
        var elem;
        var tag;
        var track;
        var tags_text = "";
        for(i=0; i < data.tags.length; i++) {
            tag = data.tags[i];
            tags_text += tag + " ";
        }
        contents.innerText = tags_text;
        contents = document.getElementById('tracks');
        for(i=0; i < data.tracks.length; i++) {
            track = data.tracks[i];
            elem = document.createElement('a');
            elem.href = "http://localhost:8080/track/" + track.id + "/play";
            elem.target = "_blank";
            elem.innerText = track.artist + ' - ' + track.album + ' - ' + track.title
            elem.title = track.lyrics
            contents.appendChild(elem);
            contents.appendChild(document.createElement('br'));
        }
    }, 'json');
</script>
</head>
<body>
    Tags:
    <div id="tags" class="tagcloud"></div>
    Tracks:
    <div id="tracks" class="tracklist"></div>
    <a href="http://musixmatch.com/" target="_blank", class="nohover">
        <img src="powered-by-mXm-transparent.png"></img>
    </a>
</body>
